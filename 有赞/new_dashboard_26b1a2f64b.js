define("zenjs/class",["require","exports","module"],function(e,t,n){var r=!1,i=/\b_super\b/,s=function(){};s.extend=function(e){function o(){!r&&this.init&&this.init.apply(this,arguments)}var t=this.prototype;r=!0;var n=new this;r=!1;for(var s in e)n[s]=typeof e[s]=="function"&&typeof t[s]=="function"&&i.test(e[s])?function(e,n){return function(){var r=this._super;this._super=t[e];var i=n.apply(this,arguments);return this._super=r,i}}(s,e[s]):e[s];return o.prototype=n,o.prototype.constructor=o,o.extend=arguments.callee,o},n.exports=s}),define("zenjs/util/cookie",[],function(){var e=function(){var e=new Date,t=+e,n=864e5,r=function(e){var t=document.cookie,n="\\b"+e+"=",r=t.search(n);if(r<0)return"";r+=n.length-2;var i=t.indexOf(";",r);return i<0&&(i=t.length),t.substring(r,i)||""},i=function(e,t,n){if(!e)return"";var r=[];for(var i in e)r.push(encodeURIComponent(i)+"="+(n?encodeURIComponent(e[i]):e[i]));return r.join(t||",")};return function(s,o){if(o===undefined)return r(s);if(typeof o=="string"||o instanceof String){if(!!o)return document.cookie=s+"="+o+";",o;o={expires:-100}}o=o||{};var u=s+"="+(o.value||"")+";";delete o.value,o.expires!==undefined&&(e.setTime(t+o.expires*n),o.expires=e.toGMTString()),u+=i(o,";"),document.cookie=u}}();return e}),define("zenjs/util/image",["require","./cookie"],function(e){var t=e("./cookie"),n={};return n.toWebp=function(){function r(e,t){var n=/(\?imageView2\/\d\/w\/\d+\/h\/\d+\/q\/\d+\/format\/)(\w+)/,r;r=e;if(n.test(e)){var i=e.match(n)[2];t?i!=="gif"&&i!=="webp"&&(r=e.replace(n,"$1webp")):i==="webp"&&(r=e.replace(n,"$1jpg"))}return r}var e=/\.([^.!]+)\!([0-9]{1,4})x([0-9]{1,4})(\+2x)?\..+/,t=!1;try{t=window.localStorage.getItem("canwebp")==="ok"}catch(n){}return function(n){var i=n,s=1,o=i.match(e);return t?o&&o.length>=4?(o[4]=="+2x"&&(s=2),i=i.replace(e,".")+o[1]+"?imageView2/2/w/"+parseInt(o[2],10)*s+"/h/"+parseInt(o[3],10)*s+"/q/75/format/"+(o[1]=="gif"?"gif":"webp")):i=r(i,!0):o&&o.length>=4?(o[4]=="+2x"&&(s=2),i=i.replace(e,".")+o[1]+"?imageView2/2/w/"+parseInt(o[2],10)*s+"/h/"+parseInt(o[3],10)*s+"/q/75/format/"+o[1]):i=r(i,!1),i}}(),n.checkCanWebp=function(){var e=function(e){var t=new Image;t.onload=t.onerror=function(){e(t.height==2)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"};return function(n){if(typeof window.localStorage=="object")try{var r=localStorage.getItem("canwebp");r=="ok"?t("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650}):r!="no"&&e(function(e){localStorage.setItem("canwebp",e?"ok":"no"),e&&t("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650})})}catch(i){}}}(),n}),function(e){var t=function(t,n){this.$element=e(t),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,{},e.fn.notify.defaults,n,this.$element.data()),this.options.transition?this.options.transition=="fade"?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message&&(typeof this.options.message=="string"?this.$note.html(this.options.message):typeof this.options.message=="object"&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text)));if(this.options.closable){var r=e('<a href="javascript:;" class="close pull-right">&times;</a>');e(r).on("click",e.proxy(onClose,this)),e(r).on("keydown",e.proxy(onClose,this)),this.$note.prepend(r),e(".notify-backdrop").length===0&&e('<div class="notify-backdrop fade in"></div>').appendTo("body")}if(this.options.uncloseable)e(".notify-backdrop").length===0&&e('<div class="notify-backdrop fade in"></div>').appendTo("body");else if(!this.options.closable){var i=e(".notify-backdrop");i.length>0&&i.remove()}return this};onClose=function(t){if(t){t.preventDefault();if(t.type==="keydown"){if(t.keyCode!==13)return}else if(t.type!=="click")return}this.options.onClose(),e(this.$note).remove(),e(".notify-backdrop").remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||2e3).fadeOut("slow",e.proxy(onClose,this)),this.$element.empty().append(this.$note),this.$note.alert(),this.$note.find(".close").focus()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||2e3).fadeOut("slow",e.proxy(onClose,this)):onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0},uncloseable:!1,message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),define("notify",function(){}),define("core/utils",["require","jquery","underscore","zenjs/util/image","notify"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),r=e("zenjs/util/image");return e("notify"),{isFenxiao:function(){return window.location.search.indexOf("from=fenxiao")>=0||window.location.search.indexOf("from=fx")>=0||window.location.host.indexOf("fx")>=0||window.location.search.indexOf("from=fx_supplier")>=0||window.location.search.indexOf("from=fx_seller")>=0},insertFenxiaoInto:function(e){this.isFenxiao()?e.is_fenxiao=!0:e.is_fenxiao=!1},getFenxiaoType:function(){return window.location.search.indexOf("type=seller")>=0||window.location.search.indexOf("fx_seller")>=0||window.location.hash.indexOf("seller")>=0?"seller":window.location.search.indexOf("type=supplier")>=0||window.location.search.indexOf("fx_supplier")>=0||window.location.hash.indexOf("supplier")>=0?"supplier":"supplier"},getFenxiaoTypeName:function(){var e=this.getFenxiaoType();return e==="seller"?"分销商":e==="supplier"?"供货商":""},ajax:function(e,r){var i=t.Deferred();typeof e=="object"&&(r=e,e=undefined),r=n.defaults(r||{},{dataType:"json"});var s,o,u=r.overrideBackboneSync;u&&(s=r.success,o=r.error,delete r.success,delete r.error,delete r.overrideBackboneSync);var a=(window._global||{}).csrf_token;return a&&(r.data=n.extend({csrf_token:a},r.data)),i.xhr=t.ajax(e,r).done(function(e,t,n){e.errcode!==void 0&&(e.code=e.errcode,e.msg=e.errmsg),+e.code===0?i.resolve(e.data,e,n):e.code===void 0?i.resolve(e,e,n):i.reject(e.msg,e,n)}).fail(function(e,t){var n=99999;t==="error"&&(t="网络错误"),t=t||"数据错误",t==="parsererror"&&(t=window._global.debug?"JSON Parse Error":"请求错误，请稍后重试"),t==="abort"&&(n=-1),i.reject(t,{code:n,msg:t},e)}),u&&i.done(function(e){s&&s(e)}).fail(function(e){o&&o(e)}),i},whenAll:function(e){e=n.isArray(e)?e:[].slice.call(arguments);var r=e.length,i=t.Deferred(),s=!1;return n.each(e,function(e){e.fail(function(){s=!0}).always(function(){r--,r===0&&(s?i.reject():i.resolve())})}),i.promise()},validMobile:function(e){return/^((\+86)|(86))?(1)\d{10}$/.test(""+e)},validPhone:function(e){return/^(\(\d{3,4}\)|\d{3,4}(-|\s)?)?\d{7,8}(-\d{1,4})?$/.test(""+e)},validPostalCode:function(e){return/^\d{6}$/.test(""+e)},getFormData:function(e){var n=e.serializeArray(),r={};return t.map(n,function(e){r[e.name]=e.value}),r},focus:function(e){if(!e)return;var n=t(document).scrollLeft(),r=t(document).scrollTop();e.focus(),window.scrollTo(n,r)},highlight:function(e,r){if(arguments.length!==2){console.error("参数错误！");return}var i=t(r),s=!1;i.find("a").each(function(r,i){var o=t(i),u=[];o.attr("href").indexOf(e.params)>=0&&!s?(o.parents("li").first().addClass("active"),s=!0):u.push(o),n.each(u,function(e){e.parents("li").removeClass("active")})})},parse:function(e,t){t=t||{};if(+e.code===0){if(!n.isFunction(t.success))return e.data;t.success(e.data)}else{if(!n.isFunction(t.fail)){this.errorNotify(e.msg);return}t.fail(e)}},userAborted:function(e){return e.status===0||e.readyState===0},handleAjaxError:function(e){var t=this;return function(r){t.userAborted(r)||(e&&n.isFunction(e)?e(r):t.errorNotify("出错啦，请重试。"))}},getStaticUrl:function(e,r){var i=this;if(n.isUndefined(e))return;i.urlData=i.urlData||{},i._titleMap=i._titleMap||{homepage:"店铺主页",usercenter:"会员主页",history:"历史消息",cart:"购物车"};if(i.urlData&&i.urlData[e])return r(i.urlData[e],i._titleMap[e]);t.getJSON(window._global.url.www+"/showcase/shop/url.json",{type:e},function(t){if(+t.code===0){var n=i.urlData[e]=t.data.short_url;r(n,i._titleMap[e])}else i.errorNotify(t.msg||"出错啦。")}).fail(function(){i.errorNotify("出错啦")})},onlyNumber:function(e,t){var r=Number(e);if(isNaN(r))return;return n.isUndefined(t)?r:r.toFixed(t)},fetchTemplateData:function(e){if(this._templateData)return this.clearNotify(),e(this._templateData),this._templateData;var n=this;t.getJSON(window._global.url.www+"/showcase/shop/defaultcategorytag.json",function(t){if(+t.code===0)return n._templateData=t.data,n.clearNotify(),e(n._templateData),n._templateData;n.errorNotify("获取模板出错，重新试试看。")})},getTemplateData:function(){return this._templateData},myriadNum:function(e,t){return t=t||"W",e>1e4?(e/1e4).toFixed(1)+t:e},isRetina:function(){return window.devicePixelRatio>1}(),getTimestamp:function(e){var t;return typeof e=="string"?t=new Date(e):typeof e=="object"?t=e:t=new Date,Math.round(t/1e3)},wbLength:function(e){var n=0,r=0,i;if(typeof e!="string")return console.error("参数错误。"),!1;t.trim(e)===""?i="":i=e;var s=/http:\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;return i=i.replace(s,"我是一个超链接占位符"),i=i.replace(/[\x21-\x7f]/gi,function(){return r++,""}),n=Math.ceil(i.length+r/2),n},getSelectedText:function(e){return e?e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"?"ERROR: Only Support input & textarea.":window.getSelection?e.value.substr(e.selectionStart,e.selectionEnd-e.selectionStart):document.selection.createRange().text:"ERROR: el(input or textarea) is need."},insertText:function(e,t){if(e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA")return;if(document.selection){e.focus();var n=document.selection.createRange();n.text=t,n.collapse(),n.select()}else if(e.selectionStart||e.selectionStart=="0"){var r=e.selectionStart,i=e.selectionEnd;e.value=e.value.substring(0,r)+t+e.value.substring(i,e.value.length),e.selectionStart=e.selectionEnd=r+t.length}else e.value+=t},fullfillImage:function(e,t,n){if(!e)return;var i=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/];n=n||{},t=t||"";for(var s=0;s<i.length;s++)e=e.replace(i[s],window._global.url.imgqn);e=e.replace("imgqntest.koudaitong.com","dn-kdt-img-test.qbox.me");if(!e.match(/^(https?:)?\/\//i))e=window._global.url.imgqn+"/"+e+t;else{if(!e.match(window._global.url.imgqn)&&!e.match("dn-kdt-img-test.qbox.me"))return e;e.match("!")||(e+=t)}return n.toWebp!==!1&&(e=r.toWebp(e)),e},toggleBr:function(e,n){var r=t.trim(e);return r?(typeof n=="undefined"||n?r=r.replace(" ","<br />"):r=r.replace("<br />"," "),r):!1},successNotify:function(e,r,i){i=i||{},!n.isFunction(r)&&n.isObject(r)&&n.extend(i,r),this.ensureNotifyEle(),t(".js-notifications").notify({transition:"fade",closable:i.closeable||!1,message:e,type:"success",fadeOut:{enabled:n.isUndefined(i.fade)?!0:i.fade,delay:i.delay||2e3},uncloseable:i.uncloseable||!1,onClosed:function(){typeof r=="function"&&r()}}).show()},clearNotify:function(){t(".js-notifications").empty(),t(".notify-backdrop").remove()},ensureNotifyEle:function(){t(".js-notifications").length<=0&&t('<div class="js-notifications notifications"></div>').appendTo("body")},errorNotify:function(e,n,r){this.ensureNotifyEle(),t(".js-notifications").notify({transition:"fade",closable:!1,message:e,type:"error",fadeOut:{enabled:!0,delay:2e3},uncloseable:!1,onClosed:function(){typeof n=="function"&&n()}}).show()},getParameterByName:function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),i=t?r.exec(t):r.exec(window.location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))},getCurrentDay:function(e){e=e||new Date;var t=e.getMonth()+1;t=t.toString().length===1?"0"+t:t;var n=e.getDate();return n=n.toString().length===1?"0"+n:n,e.getFullYear()+"-"+t+"-"+n},getFullTime:function(e,t){function n(e){return e.toString().length===1?"0"+e:e}e=e||new Date,t=t||!1;var r=e.getMonth()+1;r=n(r);var i=e.getDate();i=n(i);var s=e.getHours();s=n(s);var o=e.getMinutes();o=n(o);var u=e.getSeconds();return u=n(u),t?r+"-"+i+" "+s+":"+o:e.getFullYear()+"-"+r+"-"+i+" "+s+":"+o+":"+u},toggleButton:function(e,n){var r=t(".form-actions .btn");n?r.each(function(){t(this).button("reset")}):r.each(function(){var n=t(this);n.attr("onclick").indexOf(e)>=0?n.button("loading"):n.button("disabling")})},getUrlParam:function(e,t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=t==="router"?window.location.href:window.location.search,i=r.substr(1).match(n);return i!==null?window.unescape(i[2]):null},editUrlParam:function(e,t,n){var r=window.location.href,i=window.location.search,s;if(i!==""){var o,u,a;o=i.search(e);if(o!=-1){u=i.substr(0,o),a=i.substr(o);var f=a.search("&");f!=-1?(a=a.substr(f),s=window.location.pathname+u+e+"="+t+a):s=window.location.pathname+u+e+"="+t}else s=r+"&"+e+"="+t}else s=r+"?"+e+"="+t;if(t===""&&n){var l,c,h;l=s.indexOf(e);if(l!=-1){c=s.substr(0,l),h=s.substr(l);var p=h.search("&");p!=-1?(h=h.substr(p+1),s=c+h):(c=s.substr(0,l-1),s=c)}}return s},isIE6:function(){return t.browser.msie&&t.browser.version=="6.0"?!0:!1},isIOS:function(){var e=/(iPad|iPhone|iPod)/gi;return e.test(navigator.userAgent)},isChrome:function(){return window.navigator.userAgent.indexOf("Chrome")!==-1?!0:!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},lTrim:function(e){return e.replace(/(^\s*)/g,"")},rTrim:function(e){return e.replace(/(\s*$)/g,"")},isNumber:function(e){var t=e.which?e.which:e.keyCode;return t!=45&&t!=46&&t!=43&&t>31&&(t<48||t>57)?!1:!0},getStrLength:function(e){e=t.trim(e);var n=e.length;return n},calculateStrLength:function(e){var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)>255?t+=3:t++;return t},substring4ChAndEn:function(e,t){var n=e.substring(0,t*2);while(this.getStrLength(n)>t)n=n.substring(0,n.length-1);return n},ellipse:function(e,t){var n=this.getStrLength(e)*2>t;return e&&n?e.replace(new RegExp("([\\s\\S]{"+t+"})[\\s\\S]*"),"$1..."):e},isEmpty:function(e){return t.trim(e)!==""?!1:!0},urlCheck:function(e){return e.indexOf("://")==-1?"http://"+e:e},AddZero:function(e){return e>=0&&e<10?"0"+e:e+""},twoDecimal:function(e){return isNaN(e)?e:Number(e).toFixed(2)},transEntity:function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},countdown:function(e,n,r){var i=this;t(e).text(n),--n>=0?setTimeout(function(){i.countdown(e,n,r)},1e3):r()},str_replace:function(e,t,n,r){var i=0,s=0,o="",u="",a=0,f=0,l=[].concat(e),c=[].concat(t),h=n,p=Object.prototype.toString.call(c)==="[object Array]",d=Object.prototype.toString.call(h)==="[object Array]";h=[].concat(h),r&&(this.window[r]=0);for(i=0,a=h.length;i<a;i++){if(h[i]==="")continue;for(s=0,f=l.length;s<f;s++)o=h[i]+"",u=p?c[s]!==undefined?c[s]:"":c[0],h[i]=o.split(l[s]).join(u),r&&h[i]!==o&&(this.window[r]+=(o.length-h[i].length)/l[s].length)}return d?h:h[0]},addParameter:function(e,n){var r=e.split("#");e=r[0];for(var i in n)if(n.hasOwnProperty(i)){if(t.trim(n[i])==="")continue;if(e.indexOf("?")<0)e+="?"+t.trim(i)+"="+t.trim(n[i]);else{var s={},o=e.split("?");t.each(o[1].split("&"),function(e,n){var r=n.split("=");if(t.trim(r[1])==="")return;s[r[0]]=r[1]}),t.each(n,function(e,n){t.trim(n)!==""&&(s[e]=n)});var u=[];t.each(s,function(e,t){u.push(e+"="+t)}),e=o[0]+"?"+u.join("&")}}return r.length===2&&(e+="#"+r[1]),e},deparam:function(e){var n={};return e?(e=e.replace(/\|[^:]+:/ig,"&"),t.each(e.replace(/\+/g," ").split("&"),function(e,r){var i=r.split("="),s=decodeURIComponent(i[0]);if(!s)return n;var o=decodeURIComponent(i[1]||""),u=s.split("]["),a=u.length-1,f=0,l=n;u[0].indexOf("[")>=0&&/\]$/.test(u[a])?(u[a]=u[a].replace(/\]$/,""),u=u.shift().split("[").concat(u),a++):a=0;if(a)for(;f<=a;f++)s=u[f]!==""?u[f]:l.length,f<a?l=l[s]=l[s]||(isNaN(u[f+1])?{}:[]):l[s]=o;else t.isArray(n[s])?n[s].push(o):s in n?n[s]=[n[s],o]:n[s]=o}),n):n},keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},navActive:function(e,n){var r=t(".ui-nav");if(r.length>0){t("li.active",r).removeClass("active"),t(e).addClass("active");return}var i=t.extend(n,{navBlock:".third-nav__links"});t(i.navBlock).children("li.active").removeClass("active"),e&&t(e).addClass("active")},sidebarNavActive:function(e){var n=t("aside.ui-sidebar");n.find("li.active").removeClass("active"),t(e).addClass("active")},rgb2hex:function(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+t(e[1])+t(e[2])+t(e[3])},fixedButton:function(e,r){var i=t(".app-design .app-actions .form-actions"),s=t(".app-design .pin"),o=function(){var e=t(window).scrollTop()+t(window).height(),n=s.offset().top+s.outerHeight()+80;if(e>n)i.css({position:"static"});else{var r;t(".js-notify .alert").length>0&&t(".js-notify").css("display")==="block"?r=t(window).height()-t(".js-notify").position().top:r=0,i.css({position:"fixed",bottom:r,width:"850px",boxSizing:"border-box",zIndex:100})}};o(),e.listenTo(r,"done",function(){o()});var u=n.throttle(o,100);i.length>0&&window.addEventListener("scroll",u,!1)},REG:{url:/^(https?|ftp|weixin):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,tel:/^(tel|callto):\/\/[-\s\d,]+$/i},ANIMITION_END:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",Cache:{},updateModel:function(e){var r=t(e.target),i=this,s,o,u,a,f,l;if(!i.model)return;u=(r.attr("name")||"").split("[")[0];if(!u)return;s=(r.attr("type")||"").toLowerCase(),s==="checkbox"?a=r.prop("checked"):s==="radio"?a=i.$("[name="+r.attr("name")+"]:checked").val():a=r.val(),o=(r.data("type")||"").toLowerCase(),o=o||(s==="checkbox"?"number":"string"),o=o.substring(0,1).toUpperCase()+o.substring(1),f=e.target&&e.target.tagName.toLowerCase(),f==="select"&&(l=!!r.attr("multiple")),n.isFunction(window[o])&&(f==="select"&&l?a!==null&&(a=n.map(a,function(e){return window[o](e)})):a=window[o](a)),this.model.set(u,a,{validate:!1});if(this.model.validate&&r.data("validate")!=="no"){var c={};c[u]=a,this.model.validate(c)}e.stopPropagation()},handleScroll:function(e){var n=t(e.currentTarget),r,i,s;r=-((i=e.originalEvent)!=null?i.wheelDelta:void 0)||((s=e.originialEvent)!=null?s.detail:void 0);if(r!=null)return e.preventDefault(),e.type==="DOMMouseScroll"&&(r*=40),n.scrollTop(r+n.scrollTop())},checkIdentifyCard:function(e){function t(e){if(!/\d{17}[\dxX]/.test(e))return!1;var t=function(e,t,n){return(t+n-e%t)%t},n=function(e,t){return e*(Math.pow(2,t-1)%11)},r=0;for(var i=0;i<17;i++)r+=n(+e.charAt(i),18-i);var s=e.charAt(17),o=t(r,11,1);return s-o===0||s.toLowerCase()==="x"&&o===10}function n(e){var t=/[1-9]\d{5}(\d{2})(\d{2})(\d{2})\d{3}/,n,r,i,s,o;return n=e.match(t),n==null?!1:(r=+("19"+n[1]),i=+n[2],s=+n[3],o=new Date(r,i-1,s),o.getFullYear()===r&&o.getMonth()===i-1&&o.getDate()===s)}return t(e)||n(e)},decimalFix:function(e,t){if(!e)return"";var r=Number(e);return isNaN(r)?r:n.isUndefined(t)?r:r.toFixed(t)},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},formatFileSize:function(e,t){return e=+e||0,t===void 0&&(t=1),e>=1073741824?(e/1073741824).toFixed(t)+" GB":e>=1048576?(e/1048576).toFixed(t)+" MB":e>=1024?(e/1024).toFixed(t)+" KB":e.toFixed(t)+" B"},formatDuration:function(e){e=Math.max(0,(+e||0).toFixed(0));var t=e%60,n=(e-t)/60%60,r=(e-n*60-t)/3600,i=function(e){return e<10?"0"+e:e},s=[i(n),i(t)];return r>0&&s.unshift(i(r)),s.join(":")}}}),define("components/sms_fetch_btn/views/token",["require","core/utils"],function(e){function r(e){this.loadingLock=!1,this.isUsed=undefined}var t=e("core/utils"),n=function(){};return r.prototype={fetch:function(){if(this.isUsed===!1)return;var e=this;return this.loadingLock=!0,$.ajax({url:window._global.url.www.replace(/^https?\:/,"")+"/common/token/token.jsonp",type:"get",dataType:"jsonp"}).done(function(n){n.code==0?(e.token=n.data,e.loadingLock=!1,e.isUsed=!1):t.errorNotify(n.msg)}).fail(function(){t.errorNotify("Token 获取错误")})},get:function(){return this.isUsed=!0,this.token}},r}),define("components/sms_fetch_btn/views/sms_fetch_base",["require","exports","module","underscore","zenjs/class","core/utils","./token"],function(e,t,n){var r=e("underscore"),i=e("zenjs/class"),s=e("core/utils"),o=e("./token"),u=i.extend({init:function(e){var t=window._global.url.www.replace(/^http\:/,"");this.captchaUrl=t+"/common/sms/captcha.jsonp",this.imgcaptchaUrl=t+"/common/sms/imgcaptcha",this.imgcaptchaJsonUrl=t+"/common/sms/imgcaptcha.jsonp",r.extend(this,e),this.token=new o,this.token.fetch()},fetchSms:function(){var e=1;return function(){var t=this;return s.ajax({url:t.captchaUrl,type:"get",dataType:"jsonp",data:{verifyTimes:e,mobile:t.getMobile(),biz:t.biz,platform:"pc",sub_from:"wsc",token:t.token.get()}}).done(function(){t.onFetchSuccess&&t.onFetchSuccess(),e++}).fail(function(n,r){+r.code===10111?t.showCaptcha&&t.showCaptcha():(e++,t.onFetchError&&t.onFetchError(n))}).always(function(){t.token.fetch()})}}(),getMobile:function(){return $.trim(this.mobile.val())}});n.exports=u}),define("zenjs/util/args",["require","jquery"],function(e){var t=e("jquery"),n={getParameterByName:function(e,t){e=e.replace(/[[]/,"\\[").replace(/[]]/,"\\]"),t=t?"?"+t.split("#")[0].split("?")[1]:window.location.search;var n=RegExp("[?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):""},removeParameter:function(e,t){var n=e.split("?");if(n.length>=2){var r=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g);for(var s=i.length;s-->0;)i[s].lastIndexOf(r,0)!==-1&&i.splice(s,1);return e=n[0]+"?"+i.join("&"),e}return e},addParameter:function(){var e=function(e){var n="";for(var r in e){if(e[r]==="")continue;n+=t.trim(r)+"="+e[r]+"&"}return n?"?"+n.slice(0,n.length-1):""};return function(n,r){if(!n||n.length===0||t.trim(n).indexOf("javascript")===0)return"";var i=n.split("#"),s=i[0].split("?"),o={};return s[1]&&t.each(s[1].split("&"),function(e,t){var n;n=t.split("="),o[n[0]]=n.slice(1).join("=")}),t.each(r||{},function(e,n){o[t.trim(e)]=encodeURIComponent(n)}),n=s[0]+e(o),i[1]?n+="#"+i[1]:n}}()};return n.get=n.getParameterByName,n.remove=n.removeParameter,n.add=n.addParameter,n}),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),define("alert",function(){}),define("zenjs/util/ua",[],function(){var e=navigator.userAgent.toLowerCase(),t={isIOS:function(){return window._global.mobile_system=="ios"},getIOSVersion:function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1},isAndroid:function(){return window._global.mobile_system=="android"},isAndroidOld:function(){return/android 2.3/gi.test(e)||/android 2.2/gi.test(e)},getAndroidVersion:function(){var t=e.match(/android\s([0-9\.]*)/);return t?t[1]:!1},isWeixin:function(){return window._global.platform=="weixin"},isIPad:function(){return/ipad/gi.test(e)},isMobile:function(){return window._global.is_mobile},isSafari:function(){return/safari/gi.test(e)&&!/chrome/gi.test(e)},getSafariVersion:function(){var t=/safari\/(\S*)/i;return t.test(e)?e.match(t)[1]:"0"},isChrome:function(){return/chrome/gi.test(e)},getChromeVersion:function(){var t=/chrome\/(\S*)/i;return t.test(e)?e.match(t)[1]:"0"},isUC:function(){return/ucbrowser/gi.test(e)},getUCVersion:function(){var t=/ucbrowser\/(\S*)/i;return t.test(e)?e.match(t)[1]:"0"},isWxd:function(){return _global.platform==="youzanwxd"},isWsc:function(){return _global.platform==="youzanwsc"},isPf:function(){return _global.platform==="younipf"},getPlatformVersion:function(){return _global.platform_version},getPlatform:function(){return _global.platform}};return t}),define("bower_components/wap_common/base/webpinfo",["require","zenjs/util/ua","zenjs/util/cookie"],function(e){"use strict";function o(){if(parseInt(n("_canwebp"),10)===1)return s;if(parseInt(n("_canwebp"),10)===2)return i;var e;if(window.localStorage)try{localStorage.getItem("canwebp")==="ok"?e=s:localStorage.getItem("canwebp")==="no"&&(e=i)}catch(t){e=r}return e}function u(){return t.isWeixin()?"weixin":t.isWxd()?"wxd":t.isUC()?"uc-"+t.getUCVersion():t.isChrome()?"chrome-"+t.getChromeVersion():t.isSafari()?"safari-"+t.getSafariVersion():"unknow"}function a(){var e="";if(t.isIOS())return"ios-"+t.getIOSVersion();if(t.isAndroid())return"android-"+t.getAndroidVersion()}var t=e("zenjs/util/ua"),n=e("zenjs/util/cookie"),r=2,i=1,s=0;return{canWebp:o(),browser:u(),system:a()}}),define("bower_components/wap_common/base/log",["zenjs/util/args","./webpinfo"],function(e,t){var n=window.Zepto||window.jQuery||n,r={};_global.spm=_global.spm||{};var i=function(){var t=function(){return _global.spm.logType+_global.spm.logId||"fake"+_global.kdt_id};return function(){var r=e.get("spm");r=n.trim(r);if(r!==""){var i=r.split("_");i.length>2&&(r=i[0]+"_"+i[i.length-1]),r+="_"+t()}else r=t();return r}}(),s=function(t,r,i){var s=new Image,o=Math.floor(Math.random()*2147483648).toString(36),u="log_"+o,a=new n.Deferred;return window[u]=s,s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,window[u]=null,s=null,a.resolve()},r.link=window.location.href,r.time=(new Date).getTime(),s.src=e.add(t,r),window.setTimeout(a.resolve,1500),a.promise()},o=function(e){e=e||"default";var t={wxd:"//tj.koudaitong.com/fx.gif",wxdapp:"//app.tj.koudaitong.com/1.gif","default":"//tj.koudaitong.com/1.gif",ua:"//tj.koudaitong.com/v1/ua"};return t[e]};r.log=function(e,t){e.spm||(e.spm=r.getSpm()),e.referer_url||(e.referer_url=encodeURIComponent(document.referrer)),e.title||(e.title=_global.title||n.trim(document.title));var i=o(e.target);return delete e.target,s(i,e,t)},r.uaLog=function(){s(o("ua"),t)},r.getSpm=function(){return r.spm||(r.spm=i()),r.spm},window.Logger=r;var u=window.__logs;return u&&u.length>0&&u.forEach(r.log),r}),define("zenjs/ui/scroll_to_fixed",["require","../class"],function(e){var t=e("../class"),n=function(){},r=t.extend({init:function(e){this.fixedElem=e.fixedElem,this.hiddenBox=e.hiddenBox,this.offsetToTop=e.offsetToTop||0,this.changeClass=e.changeClass,this.beforeFix=e.beforeFix||n,this.afterFix=e.afterFix||n;if(this.hiddenBox){var t=this.fixedElem.height(),r=this.hiddenBox.height();this.disH=r-t}var i=this;i.originTop=this.fixedElem.offset().top,$(document).on("touchmove scroll",function(){i.scrollOnFix(i.hiddenBox?i.fixedElem.parent().offset().top:i.originTop)}),setTimeout(function(){i.scrollOnFix(i.hiddenBox?i.fixedElem.parent().offset().top:i.originTop)},1e3)},scrollOnFix:function(e){var t=$("body").scrollTop(),n=e,r=t-n,i={position:"fixed",top:this.offsetToTop},s={position:"absolute",bottom:0};if(r>=0){this.fixedElem.css(i),this.changeClass&&this.fixedElem.addClass(this.changeClass),this.afterFix();if(!this.hiddenBox)return;this.fixedElem.removeAttr("style"),r>=this.disH?this.fixedElem.css(s):this.fixedElem.css(i)}else this.fixedElem.css({position:"relative"}),this.changeClass&&this.fixedElem.removeClass(this.changeClass),this.beforeFix()}});return r}),define("main",["require","exports","module","components/sms_fetch_btn/views/sms_fetch_base","zenjs/util/args","notify","alert","core/utils","bower_components/wap_common/base/log","zenjs/ui/scroll_to_fixed"],function(e,t,n){function T(e){e>y&&e<=E?N(0):e>=b&&e<=S?N(1):e>=w&&e<=x?N(2):N(3)}function N(e){g.eq(e).addClass("active").siblings("li").removeClass("active")}function G(e){A.removeClass("hide"),e?(P.addClass("hide"),M.removeClass("hide"),_.click()):(M.addClass("hide"),P.hasClass("hide")?(P.removeClass("hide"),H.find("input").val(""),H.find(".field").removeClass("focus error")):U.val(""),z.html(O.val()),tt())}function Y(e){var t=e?$(e.target):_;t.attr("src",Q.imgcaptchaUrl+"?t="+new Date),D.val("")}function tt(){B.attr("disabled",!0).removeClass("activeBtn"),Z>0?(B.html(Z+"秒后重新获取"),Z--,et=setTimeout(tt,1e3)):(B.attr("disabled",!1).addClass("activeBtn").html("获取验证码"),clearTimeout(et),Z=60)}var r=e("components/sms_fetch_btn/views/sms_fetch_base"),i=e("zenjs/util/args"),s=e("notify"),o=e("alert"),u=e("core/utils"),a=e("bower_components/wap_common/base/log"),f=$(".js-more-service"),l=$(".js-dropdown-menu"),c=e("zenjs/ui/scroll_to_fixed"),h=$.cookie;$(document).delegate(".js-param","click",function(){var e=$(this),t=h.call($,"yz_search"),n=/\?/g;t&&t[0]=="?"&&(n.test(e.attr("href"))&&(t="&"+t.split("?")[1]),e.attr("href",e.attr("href")+t))});if(location.search!=""&&~location.search.indexOf("from")&&location.pathname=="/"){var p=new Date;p.setTime(p.getTime()+36e5),h.call($,"yz_search",location.search,{expires:p})}f.mouseenter(function(e){l.show()}),f.mouseleave(function(e){l.hide()}),l.mouseenter(function(e){$(this).show()}),l.mouseleave(function(e){$(this).hide()});var d=$(".js-section-wrap");new c({fixedElem:d,changeClass:"section-index-fix"});var v=$(".js-service-hover");v.hover(function(){$(this).next("div").css({left:"-160px",display:"block"})},function(){$(this).next("div").css({left:0,display:"none"})});var m=$(".js-fix-nav"),g=m.find("li"),y=$("#section-product").offset().top-180,b=$("#section-natural").offset().top-180,w=$("#section-case").offset().top-180,E=y+540,S=b+524,x=w+818-380;$(window).scroll(function(e){var t=$("body").scrollTop();T(t)}),g.click(function(e){$(this).addClass("active").siblings("li").removeClass("active")});var C=$(".js-add-logger"),k=$(".js-add-buyer-logger"),L=$(".js-join-chat"),A=$(".modal-backdrop"),O=$(".js-mobile"),M=$(".captcha-form"),_=$(".js-captcha-img"),D=$(".js-captcha-code"),P=$("#js-signup-wrap"),H=$("#js-signup-form"),B=$(".js-fetch-sms"),j=$(".js-help-icon"),F=$(".help-popover"),I=$(".js-nick-name"),q=$(".field"),R=$(".js-submit-signup"),U=$(".js-sms-captcha"),z=$(".js-tip-phone"),W=!1,X=$("#js-close-captcha"),V=$("#js-close-signup"),J=$(".js-register"),K=$(".js-login"),Q=new r({imgcaptchaUrl:"/dashboard/index/Imgcaptcha",biz:"kdt_account_captcha",mobile:O,onFetchSuccess:function(){u.successNotify("短信发送成功"),G(!1)},onFetchError:function(e){var t=/该手机号已被注册！/g;t.test(e)?(A.addClass("hide"),P.addClass("hide"),M.addClass("hide"),J.addClass("hide"),K.removeClass("hide")):u.errorNotify(e)},showCaptcha:function(){G(!0)}});C.click(function(e){a.log({fm:"click",title:"有赞 - 移动零售服务商"})}),k.click(function(e){a.log({fm:"click",title:"有赞(买家版)"})}),L.click(function(e){a.log({fm:"click",title:"你希望有赞买家版是啥样的呢？"})}),O.on("input propertychange",function(e){J.removeClass("hide"),K.addClass("hide")}),J.click(function(e){if(/MSIE/.test(navigator.userAgent)){window.location.href=_global.url.www+"/account";return}var t=J.siblings(".field");O.focus().blur();if(t.hasClass("error"))return!1;if(Q.token.loadingLock){u.errorNotify("数据加载中，稍后再试");return}a.log({fm:"click",title:"立即注册，免费开店"}),Q.fetchSms()}),X.click(function(e){A.addClass("hide"),M.addClass("hide")}),V.click(function(e){A.addClass("hide"),P.addClass("hide")}),_.click(function(e){e.stopImmediatePropagation(),Y(e)}),j.hover(function(){F.show()},function(){F.hide()}),I.on("input propertychange",function(e){W=!1}),q.on("click",function(e){var t=$(e.currentTarget);t.addClass("focus"),t.find("input").focus()}),q.find("input").on("focus",function(e){var t=$(e.target).closest(".field"),n=$(e.target).attr("name");t.removeClass("error"),t.removeClass("blur"),t.addClass("focus"),n=="password"&&t.addClass("tip")}).on("blur",function(e){function c(){o?(i="",t.val(""),n.removeClass("tip"),n.removeClass("focus"),n.removeClass("blur"),n.addClass("error")):(n.removeClass("tip"),n.removeClass("error"),n.removeClass("focus"),n.addClass("blur"))}var t=$(e.target),n=t.closest(".field"),r=n.find(".error-message"),i=$.trim(t.val()),s=t.attr("name"),o;switch(s){case"mobile":i.length>11?o=!0:/\d{11}/.test(i)||(o=!0);break;case"nick_name":i?W==0?u.ajax({type:"GET",url:_global.url.www.replace(/^http\:/,"")+"/account/index/checknickname.json",dataType:"json",data:{nick_name:i}}).done(function(){o=!1,W=!0}).fail(function(e,t){t.code==10100?r.text("该昵称已被使用"):u.errorNotify(e),o=!0}).always(function(){c()}):W==1&&(o=!1):(o=!0,r.text("昵称不能为空"));break;case"password":if(i.length<8)o=!0;else{var f=l(i);function l(e){var t=/[a-zA-Z]/g,n=/[0-9]/g,r=0,i=t.test(e),s=n.test(e);return i&&s&&(r=1),r}f||(o=!0)}break;case"captcha_code":i.length!=4||!$.isNumeric(+i)?(o=!0,r.text("请输入4为数字")):(a.log({fm:"click",title:"获取短信验证码"}),u.ajax({url:"/dashboard/index/Imgcaptcha.json",dataType:"json",type:"post",data:{captcha_code:i,mobile:Q.getMobile()}}).done(function(){Q.fetchSms(),o=!1}).fail(function(e,t){+t.code===10100?r.text("验证码错误，请重试"):u.errorNotify(e),_.click(),o=!0}).always(function(){c()}));break;case"sms_captcha":if(i.length!=6||!$.isNumeric(+i))o=!0,r.text("短信验证码是六位数字")}c()});var Z=60,et;B.click(function(e){a.log({fm:"click",title:"获取短信验证码"}),Q.fetchSms()});var nt=H.find("input");R.click(function(e){nt.focus().blur();if(H.find(".field").hasClass("error"))return;var t=H.find("[name=nick_name]").val(),n=H.find("[name=password]").val(),r=H.find("[name=sms_captcha]").val(),s=H.find("[name=recommend]").val();u.ajax({url:window._global.url.www.replace(/^http\:/,"")+"/account/index/account.json",type:"POST",dataType:"json",data:{model:{nick_name:t,password:n,sms_captcha:r,recommend:s,mobile:O.val(),tj_from:i.get("from")}}}).done(function(){u.successNotify("恭喜，您已注册成功"),a.log({fm:"click",title:"完成开店",mobile:O.val()}).done(function(){window.location="http://koudaitong.com/v2/account/user/login"})}).fail(function(e){u.errorNotify(e),U.val("").focus().blur()})})});